(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(e,t,a){e.exports=a(315)},205:function(e,t,a){},206:function(e,t,a){},300:function(e,t){},315:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(79),i=a.n(c),l=a(11),o=a(6),s=a(135),u=a(12),m="ADD_RECIPE",p="UPDATE_RECIPE",d="GET_RECIPES",E="RECEIVE_RECIPES",f="SELECT_RECIPE",b="CLEAR_RECIPE",h={isGetting:!1,isBroken:!1,allIds:[],byId:{},selectedId:null},g=a(322),v=Object(o.combineReducers)({recipes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object.assign({},e,{isGetting:!0});case E:var a=t.payload.data;if("error"!==t.payload){var n=a.map(function(e){return e.id}),r={};return a.forEach(function(e){r[e.id]=Object(u.a)({},e)}),Object.assign({},e,{isGetting:!1,allIds:n,byId:r})}return Object.assign({},e,{isBroken:!0});case m:var c=t.payload.data,i=Object(s.a)(e.allIds),l=Object(u.a)({},e.byId);return i.push(c.id),l[c.id]=Object(u.a)({},c),Object(u.a)({},e,{allIds:i,byId:l});case p:var o=t.payload.data,g=Object(u.a)({},e.byId[o.id],o),v=Object(u.a)({},e.byId);return v[g.id]=Object(u.a)({},g),Object(u.a)({},e,{byId:v});case f:var O=t.id;return Object(u.a)({},e,{selectedId:O});case b:return Object(u.a)({},e,{selectedId:null});default:return e}},form:g.a}),O=a(130),y=a(131),j=a(132),I=function(){try{var e=sessionStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),R=Object(o.createStore)(v,I,Object(O.composeWithDevTools)(Object(o.applyMiddleware)(j.a)));R.subscribe(Object(y.throttle)(function(){!function(e){try{var t=JSON.stringify(e);sessionStorage.setItem("state",t)}catch(a){}}({recipes:R.getState().recipes})},1e3));var S=R,C=(a(205),a(206),a(207),a(18)),N=a(19),w=a(23),k=a(20),x=a(24),F=a(321),A=a(136),G=a(46),L=a.n(G),P="https://stark-beach-91865.herokuapp.com/";function B(e){return{type:E,payload:e}}var _=function(e){return e.recipes},T=function(e,t){return _(e)?_(e).byId[t]:{}},D=function(e){return function(e){return _(e)?_(e).allIds:[]}(e).map(function(t){return T(e,t)})},J=a(81);function M(e){var t=e.recipe,a=e.match;return r.a.createElement(J.a,{to:"".concat(a.url,"/").concat(t.id),key:t.id,className:"recipe-card"},r.a.createElement("h1",null,t.name))}function W(e){return r.a.createElement("div",{className:"recipe-collection"},e.recipes.map(function(t){return r.a.createElement(M,Object.assign({recipe:t},e))}))}var V=a(320),q=a(318),H=a(319),U=a(317),X=a(133),$=a.n(X),z=function(e){var t=e.input;return r.a.createElement($.a,Object.assign({},t,{onChange:function(e,a,n){"user"===n&&t.onChange(e)},onBlur:function(e,a,n){t.onBlur(n.getHTML())}}))},K=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",Object.assign({},e.input,{className:e.className,type:e.type,placeholder:e.placeholder})),e.meta.touched&&e.meta.error&&r.a.createElement("span",{className:"error"},e.meta.error))},Q=function(e,t,a){var n,c;return a.length>1&&(c=r.a.createElement("button",{type:"button",onClick:function(){return a.remove(t)}}," - ")),0!==a.length&&t!==a.length-1||(n=r.a.createElement("button",{type:"button",onClick:function(){return a.push()}}," + ")),r.a.createElement("li",{key:t},r.a.createElement("div",{className:"ingredientFields"},r.a.createElement(q.a,{className:"quant-field",name:"".concat(e,".val"),component:K,type:"number",placeholder:"0"}),r.a.createElement(q.a,{className:"scale-field",name:"".concat(e,".scale"),component:K,type:"text",placeholder:"Measure"}),r.a.createElement(q.a,{className:"name-field",name:"".concat(e,".name"),component:K,type:"text",placeholder:"Ingredient"}),c,n))},Y=function(e){var t=e.fields;return 0===t.length&&t.push(),r.a.createElement("ul",{className:"ingredients"},t.map(Q))},Z=function(e){function t(e){var a;return Object(C.a)(this,t),(a=Object(w.a)(this,Object(k.a)(t).call(this))).submit=function(e){var t=a.props,n=t.id,r=t.addRecipe,c=t.updateRecipe,i={Recipe:Object(u.a)({},e)};return console.log(n),"new"===n?L.a.post(P+"/recipes",i).then(function(e){r(e),a.setState({postSuccessful:!0,postId:e.data.id})}).catch(function(e){console.log(e)}):L.a.patch(P+"/recipes/"+n,i).then(function(e){c(e),a.setState({patchSuccessful:!0})}).catch(function(e){console.log(e)})},a.state={postSuccessful:!1,postId:"",patchSuccessful:!1},a}return Object(x.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.id,n=this.state,c=n.postSuccessful,i=n.patchSuccessful,l=n.postId;return c?r.a.createElement(V.a,{to:"/recipes/".concat(l)}):i?r.a.createElement(V.a,{to:"/recipes/".concat(a)}):r.a.createElement("form",{onSubmit:t(this.submit)},r.a.createElement(q.a,{className:"title-field",name:"name",component:K,type:"text",placeholder:"Recipe Name"}),r.a.createElement("h2",null,"Ingredients"),r.a.createElement(H.a,{name:"Ingredients",component:Y}),r.a.createElement("h2",null,"Instructions"),r.a.createElement(q.a,{className:"detail-text-area",name:"details",component:z}),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Save")))}}]),t}(r.a.Component);var ee=Object(U.a)({form:"recipe"})(Z),te=Object(l.b)(function(e,t){var a=t.id;return{initialValues:T(e,a)}},{addRecipe:function(e){return{type:m,payload:e}},updateRecipe:function(e){return{type:p,payload:e}}})(ee),ae=a(134),ne=a.n(ae);function re(e){var t=e.recipe,a=e.id;return t&&t.id===+a?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,t.name),r.a.createElement("h2",null,"Ingredients"),r.a.createElement("ul",{className:"ingredients"},t.Ingredients&&t.Ingredients.map(function(e){return r.a.createElement("li",{className:"ingredient-entry",key:e.name},r.a.createElement("span",null,e.val," ",e.scale," ",e.name))})),r.a.createElement("h2",null,"Instructions"),r.a.createElement("div",null,ne()(t.details))):null}var ce=a(316),ie=function(e){return r.a.createElement("nav",{id:e.id},r.a.createElement(ce.a,{to:"/recipes"},"My Recipes"),r.a.createElement(ce.a,{to:"/recipes/new"},"Add Recipe"))},le=function(e){function t(e){var a;return Object(C.a)(this,t),(a=Object(w.a)(this,Object(k.a)(t).call(this,e))).props.getAllRecipes(),a}return Object(x.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props,t=e.recipeList,a=e.recipeIsGetting;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"main"},r.a.createElement(ie,{id:"navbar"}),r.a.createElement(A.a,{path:"/recipes",render:function(e){return a?r.a.createElement("p",null,"Loading..."):r.a.createElement(W,Object.assign({recipes:t},e))}})),r.a.createElement(A.a,{path:"/recipes/:id",component:me}))}}]),t}(r.a.Component);var oe=Object(l.b)(function(e){return{recipeList:D(e),recipeIsGetting:_(e).isGetting}},{getAllRecipes:function(){return function(e){return e({type:d}),G.get(P+"/recipes").then(function(t){return e(B(t))},function(t){return e(B("error"))})}}})(le),se=a(323),ue=function(e){function t(){return Object(C.a)(this,t),Object(w.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props,t=e.recipe,a=e.match;return console.log(a,t),r.a.createElement("div",{id:"detail"},r.a.createElement(se.a,null,r.a.createElement(A.a,{exact:!0,path:"/recipes/new",render:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{to:"/recipes",type:"button"}," Cancel "),r.a.createElement(te,{id:"new"}))}}),r.a.createElement(A.a,{exact:!0,path:"".concat(a.url),render:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{to:"/recipes",type:"button"}," X "),r.a.createElement(J.a,{to:"".concat(a.url,"/edit")}," Edit "),r.a.createElement(re,{id:a.params.id,recipe:t}))}}),r.a.createElement(A.a,{path:"".concat(a.url,"/edit"),render:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{to:"".concat(a.url)}," Cancel "),r.a.createElement(te,{id:a.params.id}))}})))}}]),t}(r.a.Component);var me=Object(l.b)(function(e,t){var a=t.match.params.id;return{recipe:T(e,a)}})(ue),pe=function(e){function t(e){var a;return Object(C.a)(this,t),(a=Object(w.a)(this,Object(k.a)(t).call(this))).state={displayRecipeList:!0,displayRecipeForm:!1},a}return Object(x.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return r.a.createElement(F.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"flex-container"},r.a.createElement(A.a,{path:"/",component:oe}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(l.a,{store:S},r.a.createElement(pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[138,1,2]]]);
//# sourceMappingURL=main.3846932d.chunk.js.map