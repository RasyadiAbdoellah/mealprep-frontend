(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(e,t,n){e.exports=n(315)},205:function(e,t,n){},206:function(e,t,n){},300:function(e,t){},315:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(79),i=n.n(c),l=n(11),o=n(6),s=n(83),u=n(12),d="ADD_RECIPE",p="UPDATE_RECIPE",m="DELETING_RECIPE",E="DELETE_RECIPE",f="GET_RECIPES",b="RECEIVE_RECIPES",h="SELECT_RECIPE",g="CLEAR_RECIPE",v={isGetting:!1,getFailed:!1,deleteFailed:!1,postFailed:!1,updateFailed:!1,errorMessage:"",isDeletingRecipe:!1,recipeIdToDelete:null,allIds:[],byId:{},selectedId:null},O=n(320),j=Object(o.combineReducers)({recipes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object.assign({},e,{isGetting:!0});case b:var n=t.payload.data;if(n&&"string"!==typeof n){var a=n.map(function(e){return e.id}),r={};return n.forEach(function(e){r[e.id]=Object(u.a)({},e)}),Object.assign({},e,{isGetting:!1,getFailed:!1,allIds:a,byId:r})}return Object.assign({},e,{isGetting:!1,getFailed:!0,errorMessage:t.payload});case d:var c=t.payload.data,i=Object(s.a)(e.allIds),l=Object(u.a)({},e.byId);return i.push(c.id),l[c.id]=Object(u.a)({},c),Object(u.a)({},e,{allIds:i,byId:l});case p:var o=t.payload.data,O=Object(u.a)({},e.byId[o.id],o),j=Object(u.a)({},e.byId);return j[O.id]=Object(u.a)({},O),Object(u.a)({},e,{byId:j});case m:return Object.assign({},e,{isDeletingRecipe:!0,recipeIdToDelete:t.id});case E:var y=t.response;console.log(y);var I=e.recipeIdToDelete,R=Object(s.a)(e.allIds),w=Object(u.a)({},e.byId);return y?Object.assign({},e,{isDeletingRecipe:!1,deleteFailed:!0,errorMessage:y}):(R.splice(R.indexOf(+I),1),delete w[I],Object.assign({},e,{isDeletingRecipe:!1,deleteFailed:!1,recipeIdToDelete:null,allIds:R,byId:w}));case h:var S=t.id;return Object(u.a)({},e,{selectedId:S});case g:return Object(u.a)({},e,{selectedId:null});default:return e}},form:O.a}),y=n(131),I=n(132),R=n(133),w=function(){try{var e=sessionStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),S=Object(o.createStore)(j,w,Object(y.composeWithDevTools)(Object(o.applyMiddleware)(R.a)));S.subscribe(Object(I.throttle)(function(){!function(e){try{var t=JSON.stringify(e);sessionStorage.setItem("state",t)}catch(n){}}({recipes:S.getState().recipes})},1e3));var F=S,C=(n(205),n(206),n(207),n(16)),N=n(17),k=n(19),D=n(18),T=n(20),G=n(322),x=n(136),L=n(37),P=n.n(L),A="https://stark-beach-91865.herokuapp.com";function _(e){return{type:b,payload:e}}function M(e){return{type:E,response:e}}var W=function(e){return e.recipes},B=function(e,t){return W(e)?W(e).byId[t]:{}},H=function(e){return function(e){return W(e)?W(e).allIds:[]}(e).map(function(t){return B(e,t)})},J=n(81);function V(e){var t=e.recipe,n=e.match;return r.a.createElement(J.a,{to:"".concat(n.url,"/").concat(t.id),className:"recipe-card"},r.a.createElement("h1",null,t.name))}function q(e){return r.a.createElement("div",{className:"recipe-collection"},e.recipes.map(function(t){return r.a.createElement(V,Object.assign({key:t.id,recipe:t},e))}))}var z=n(321),U=n(318),X=n(319),$=n(317),K=n(134),Q=n.n(K),Y=function(e){var t=e.input;return r.a.createElement(Q.a,Object.assign({},t,{onChange:function(e,n,a){"user"===a&&t.onChange(e)},onBlur:function(e,n,a){t.onBlur(a.getHTML())}}))},Z=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",Object.assign({},e.input,{className:e.className,type:e.type,placeholder:e.placeholder})),e.meta.touched&&e.meta.error&&r.a.createElement("span",{className:"error"},e.meta.error))},ee=function(e,t,n){var a,c;return n.length>1&&(c=r.a.createElement("button",{type:"button",onClick:function(){return n.remove(t)}}," - ")),0!==n.length&&t!==n.length-1||(a=r.a.createElement("button",{type:"button",onClick:function(){return n.push()}}," + ")),r.a.createElement("li",{key:t},r.a.createElement("div",{className:"ingredientFields"},r.a.createElement(U.a,{className:"quant-field",name:"".concat(e,".val"),component:Z,type:"number",placeholder:"0"}),r.a.createElement(U.a,{className:"scale-field",name:"".concat(e,".scale"),component:Z,type:"text",placeholder:"Measure"}),r.a.createElement(U.a,{className:"name-field",name:"".concat(e,".name"),component:Z,type:"text",placeholder:"Ingredient"}),c,a))},te=function(e){var t=e.fields;return 0===t.length&&t.push(),r.a.createElement("ul",{className:"ingredients"},t.map(ee))},ne=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(k.a)(this,Object(D.a)(t).call(this))).submit=function(e){var t=n.props,a=t.id,r=t.addRecipe,c=t.updateRecipe,i={Recipe:Object(u.a)({},e)};return"new"===a?P.a.post(A+"/recipes",i).then(function(e){r(e),n.setState({postSuccessful:!0,postId:e.data.id})}).catch(function(e){console.log(e)}):P.a.patch(A+"/recipes/"+a,i).then(function(e){c(e),n.setState({patchSuccessful:!0})}).catch(function(e){console.log(e)})},console.log(e),n.state={postSuccessful:!1,postId:"",patchSuccessful:!1},n}return Object(T.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,n=e.id,a=this.state,c=a.postSuccessful,i=a.patchSuccessful,l=a.postId;return c?r.a.createElement(z.a,{to:"/recipes/".concat(l)}):i?r.a.createElement(z.a,{to:"/recipes/".concat(n)}):r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:t(this.submit)},r.a.createElement(U.a,{className:"title-field",name:"name",component:Z,type:"text",placeholder:"Recipe Name"}),r.a.createElement("h2",null,"Ingredients"),r.a.createElement(X.a,{name:"Ingredients",component:te}),r.a.createElement("h2",null,"Instructions"),r.a.createElement(U.a,{className:"detail-text-area",name:"details",component:Y}),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Save"))))}}]),t}(r.a.Component);var ae=Object($.a)({form:"recipe",enableReinitialize:!0})(ne),re=Object(l.b)(function(e,t){var n=t.id;return"new"===n?{initialValues:{}}:{initialValues:B(e,n)}},{addRecipe:function(e){return{type:d,payload:e}},updateRecipe:function(e){return{type:p,payload:e}}})(ae),ce=n(135),ie=n.n(ce);function le(e){var t=e.recipe,n=e.id;return t&&t.id===+n?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,t.name),r.a.createElement("h2",null,"Ingredients"),r.a.createElement("ul",{className:"ingredients"},t.Ingredients&&t.Ingredients.map(function(e){return r.a.createElement("li",{className:"ingredient-entry",key:e.name},r.a.createElement("span",null,e.val," ",e.scale," ",e.name))})),r.a.createElement("h2",null,"Instructions"),r.a.createElement("div",null,ie()(t.details))):r.a.createElement(z.a,{to:"/recipes"})}var oe=n(316),se=function(e){return r.a.createElement("nav",{id:e.id},r.a.createElement(oe.a,{to:"/recipes"},"My Recipes"),r.a.createElement(oe.a,{to:"/recipes/new"},"Add Recipe"))},ue=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(k.a)(this,Object(D.a)(t).call(this))).warningHandler=function(){n.setState({showWarning:!n.state.showWarning})},n.state={showWarning:!1},n}return Object(T.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.isForm,a=void 0===n?null:n,c=t.match,i=c.params.id,l=c.url,o=t.deleteSelectedRecipe,s=this.state.showWarning;return r.a.createElement("div",null,a?r.a.createElement(J.a,{to:"new"!==i?"".concat(l):"/recipes"}," Cancel "):r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{to:"/recipes"}," X "),r.a.createElement(J.a,{to:"".concat(l,"/edit")}," Edit "),r.a.createElement("button",{onClick:function(){return e.warningHandler()}},"Delete"),s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Are you sure?"),r.a.createElement("button",{onClick:function(){return o(i)}}," yes "),r.a.createElement("button",{onClick:function(){return e.warningHandler()}}," no "))))}}]),t}(r.a.Component),de=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(k.a)(this,Object(D.a)(t).call(this,e))).props.getAllRecipes(),n}return Object(T.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props,t=e.recipeList,n=e.recipeIsGetting,a=e.recipeGetFailed;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"main"},r.a.createElement(se,{id:"navbar"}),r.a.createElement(x.a,{path:"/recipes",render:function(e){return n?r.a.createElement("p",null,"Loading..."):a?r.a.createElement("p",null," Failed to load recipes. Try again later "):r.a.createElement(q,Object.assign({recipes:t},e))}})),r.a.createElement(x.a,{path:"/recipes/:id",component:fe}))}}]),t}(r.a.Component);var pe=Object(l.b)(function(e){return{recipeList:H(e),recipeIsGetting:W(e).isGetting,recipeGetFailed:W(e).getFailed}},{getAllRecipes:function(){return function(e){return e({type:f}),L.get(A+"/recipes").then(function(t){return e(_(t))},function(t){return e(_("error: "+toString(t)))})}}})(de),me=n(323),Ee=function(e){function t(){return Object(C.a)(this,t),Object(k.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props,t=e.recipe,n=e.match,a=e.deleteSelectedRecipe;return r.a.createElement("div",{id:"detail"},r.a.createElement(me.a,null,r.a.createElement(x.a,{exact:!0,path:"/recipes/new",render:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,{match:n,isForm:!0}),r.a.createElement(re,{id:"new"}))}}),r.a.createElement(x.a,{exact:!0,path:"".concat(n.url),render:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,{match:n,deleteSelectedRecipe:a}),r.a.createElement(le,{id:n.params.id,recipe:t}))}}),r.a.createElement(x.a,{path:"".concat(n.url,"/edit"),render:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,{match:n,isForm:!0}),r.a.createElement(re,{id:n.params.id}))}})))}}]),t}(r.a.Component);var fe=Object(l.b)(function(e,t){var n=t.match.params.id;return{recipe:B(e,n)}},{deleteSelectedRecipe:function(e){return function(t){return t(function(e){return{type:m,id:e}}(e)),L.delete(A+"/recipes/"+e).then(function(e){return t(M())},function(e){return t(M("error: "+toString(e)))})}}})(Ee),be=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(k.a)(this,Object(D.a)(t).call(this))).state={displayRecipeList:!0,displayRecipeForm:!1},n}return Object(T.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return r.a.createElement(G.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"flex-container"},r.a.createElement(x.a,{path:"/",component:pe}))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(l.a,{store:F},r.a.createElement(be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[138,1,2]]]);
//# sourceMappingURL=main.aeb723c0.chunk.js.map